<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Study Tutor - Smart Problem Solver</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                }
            },
            fontFamily: {
                sans: ['Inter', 'system-ui', 'sans-serif'],
            }
        },
    };
    </script>
    <style>
        :root {
            --background: 249 250 251;
            --foreground: 17 24 39;
            --card: 255 255 255;
            --card-foreground: 17 24 39;
            --primary: 99 102 241;
            --primary-foreground: 255 255 255;
            --secondary: 16 185 129;
            --secondary-foreground: 255 255 255;
            --muted: 238 242 255;
            --muted-foreground: 107 114 128;
            --accent: 245 158 11;
            --accent-foreground: 255 255 255;
            --border: 229 231 235;
            --input: 255 255 255;
            --ring: 99 102 241;
            --radius: 0.5rem;
        }

        .message-bubble {
            max-width: 80%;
            word-wrap: break-word;
        }

        .typing-indicator {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .drag-zone {
            transition: all 0.3s ease;
        }

        .drag-zone.drag-over {
            background-color: hsl(var(--muted));
            border-color: hsl(var(--primary));
        }

        .math-expression {
            font-family: 'KaTeX_Main', 'Times New Roman', serif;
            font-size: 1.1em;
        }

        .solution-step {
            transition: all 0.2s ease;
        }

        .solution-step:hover {
            background-color: hsl(var(--muted) / 0.3);
        }

        .copy-button {
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .message-container:hover .copy-button {
            opacity: 1;
        }

        .toast {
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-background font-sans">
    <!-- @COMPONENT: AppLayout -->
    <div class="flex flex-col h-screen">
        <!-- @COMPONENT: Header -->
        <header class="bg-card shadow-sm border-b border-border px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                    <i class="fas fa-brain text-primary-foreground text-sm"></i>
                </div>
                <div>
                    <h1 class="text-lg font-semibold text-foreground">AI Study Tutor</h1>
                    <p class="text-xs text-muted-foreground">Powered by Groq AI</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <button class="p-2 hover:bg-muted rounded-md transition-colors">
                    <i class="fas fa-history text-muted-foreground"></i>
                </button>
                <button class="p-2 hover:bg-muted rounded-md transition-colors">
                    <i class="fas fa-cog text-muted-foreground"></i>
                </button>
            </div>
        </header>
        <!-- @END_COMPONENT: Header -->

        <!-- @COMPONENT: ChatArea -->
        <div class="flex-1 overflow-hidden flex flex-col">
            <div class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- Welcome Message -->
                <div class="flex justify-center">
                    <div class="text-center max-w-md">
                        <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-robot text-primary text-2xl"></i>
                        </div>
                        <h2 class="text-xl font-semibold text-foreground mb-2">Welcome to AI Study Tutor!</h2>
                        <p class="text-muted-foreground text-sm">Ask me any question or upload a photo of your homework problem. I'll provide step-by-step solutions and explanations.</p>
                    </div>
                </div>

                <!-- Sample Conversation -->
                <div class="message-container flex justify-end">
                    <div class="message-bubble bg-card border border-border rounded-2xl px-4 py-3 shadow-sm">
                        <p class="text-foreground">Solve this quadratic equation: x² - 5x + 6 = 0</p>
                        <span class="text-xs text-muted-foreground mt-1 block">2:45 PM</span>
                    </div>
                </div>

                <div class="message-container flex justify-start">
                    <div class="message-bubble bg-muted rounded-2xl px-4 py-3 shadow-sm relative group">
                        <button class="copy-button absolute top-2 right-2 p-1 hover:bg-card rounded text-xs text-muted-foreground">
                            <i class="fas fa-copy"></i>
                        </button>
                        <div class="pr-8">
                            <p class="text-foreground font-medium mb-3">I'll solve this quadratic equation step-by-step:</p>
                            
                            <div class="space-y-3">
                                <div class="solution-step p-3 rounded-lg border border-border/50">
                                    <div class="flex items-center mb-2">
                                        <span class="bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium">Step 1</span>
                                        <span class="ml-2 text-sm font-medium text-foreground">Identify the coefficients</span>
                                    </div>
                                    <p class="text-sm text-muted-foreground mb-2">For ax² + bx + c = 0:</p>
                                    <div class="math-expression text-center bg-card p-2 rounded border">
                                        a = 1, b = -5, c = 6
                                    </div>
                                </div>

                                <div class="solution-step p-3 rounded-lg border border-border/50">
                                    <div class="flex items-center mb-2">
                                        <span class="bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium">Step 2</span>
                                        <span class="ml-2 text-sm font-medium text-foreground">Apply the quadratic formula</span>
                                    </div>
                                    <div class="math-expression text-center bg-card p-3 rounded border">
                                        x = (-b ± √(b² - 4ac)) / 2a
                                    </div>
                                </div>

                                <div class="solution-step p-3 rounded-lg border border-border/50">
                                    <div class="flex items-center mb-2">
                                        <span class="bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium">Step 3</span>
                                        <span class="ml-2 text-sm font-medium text-foreground">Calculate the discriminant</span>
                                    </div>
                                    <div class="math-expression text-center bg-card p-2 rounded border">
                                        b² - 4ac = (-5)² - 4(1)(6) = 25 - 24 = 1
                                    </div>
                                </div>

                                <div class="solution-step p-3 rounded-lg border border-border/50">
                                    <div class="flex items-center mb-2">
                                        <span class="bg-secondary text-secondary-foreground text-xs px-2 py-1 rounded-full font-medium">Solution</span>
                                        <span class="ml-2 text-sm font-medium text-foreground">Final answer</span>
                                    </div>
                                    <div class="math-expression text-center bg-card p-3 rounded border">
                                        x = (5 ± √1) / 2 = (5 ± 1) / 2
                                    </div>
                                    <div class="mt-2 text-center">
                                        <span class="inline-block bg-accent/10 text-accent px-3 py-1 rounded-full text-sm font-medium mr-2">x₁ = 3</span>
                                        <span class="inline-block bg-accent/10 text-accent px-3 py-1 rounded-full text-sm font-medium">x₂ = 2</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <span class="text-xs text-muted-foreground mt-3 block">2:45 PM</span>
                    </div>
                </div>

                <div class="message-container flex justify-end">
                    <div class="message-bubble bg-card border border-border rounded-2xl px-4 py-3 shadow-sm">
                        <p class="text-foreground">Can you explain why we factor instead of using the quadratic formula?</p>
                        <span class="text-xs text-muted-foreground mt-1 block">2:47 PM</span>
                    </div>
                </div>

                <!-- Sample image upload message -->
                <div class="message-container flex justify-end">
                    <div class="message-bubble bg-card border border-border rounded-2xl px-4 py-3 shadow-sm">
                        <p class="text-foreground mb-2">I uploaded this calculus problem:</p>
                        <!-- Sample homework image showing calculus derivative problem -->
                        <img src="https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300" alt="Calculus homework with derivative problems written on paper" class="rounded-lg border border-border max-w-full h-auto" data-mock="true">
                        <span class="text-xs text-muted-foreground mt-2 block">2:50 PM</span>
                    </div>
                </div>

                <!-- AI Typing Indicator -->
                <div class="message-container flex justify-start">
                    <div class="message-bubble bg-muted rounded-2xl px-4 py-3 shadow-sm">
                        <div class="flex items-center space-x-2">
                            <div class="typing-indicator">
                                <i class="fas fa-robot text-primary"></i>
                            </div>
                            <span class="text-sm text-muted-foreground">AI is analyzing your problem...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: ChatArea -->

        <!-- @COMPONENT: InputArea -->
        <div class="border-t border-border bg-card p-4">
            <div class="max-w-4xl mx-auto">
                <!-- File Upload Zone -->
                <div class="drag-zone border-2 border-dashed border-border rounded-lg p-4 mb-4 text-center transition-all duration-300" id="dropZone">
                    <i class="fas fa-cloud-upload-alt text-2xl text-muted-foreground mb-2"></i>
                    <p class="text-sm text-muted-foreground mb-1">Drag and drop an image here, or click to browse</p>
                    <p class="text-xs text-muted-foreground">Supports JPG, PNG, PDF up to 10MB</p>
                    <input type="file" class="hidden" id="fileInput" accept="image/*,.pdf" data-implementation="Should handle file upload to Groq API">
                </div>

                <!-- Text Input Area -->
                <div class="flex items-end space-x-3">
                    <div class="flex-1 relative">
                        <textarea 
                            placeholder="Ask a question or describe your problem..." 
                            class="w-full bg-input border border-border rounded-lg px-4 py-3 pr-12 resize-none focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all"
                            rows="1"
                            data-implementation="Should auto-resize and support LaTeX input"
                            data-bind="inputMessage"
                        ></textarea>
                        <button class="absolute right-3 top-3 text-muted-foreground hover:text-foreground transition-colors">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                    <button class="bg-primary hover:bg-primary/90 text-primary-foreground px-6 py-3 rounded-lg font-medium transition-colors flex items-center space-x-2" data-event="click:handleSendMessage">
                        <i class="fas fa-paper-plane"></i>
                        <span>Send</span>
                    </button>
                </div>

                <!-- Quick Actions -->
                <div class="flex items-center justify-between mt-3">
                    <div class="flex space-x-2">
                        <button class="text-xs bg-muted text-muted-foreground px-3 py-1 rounded-full hover:bg-muted/80 transition-colors">
                            📐 Geometry
                        </button>
                        <button class="text-xs bg-muted text-muted-foreground px-3 py-1 rounded-full hover:bg-muted/80 transition-colors">
                            📊 Statistics
                        </button>
                        <button class="text-xs bg-muted text-muted-foreground px-3 py-1 rounded-full hover:bg-muted/80 transition-colors">
                            ∫ Calculus
                        </button>
                    </div>
                    <div class="flex items-center space-x-2 text-xs text-muted-foreground">
                        <i class="fas fa-keyboard"></i>
                        <span>Press Enter to send</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: InputArea -->
    </div>
    <!-- @END_COMPONENT: AppLayout -->

    <!-- Toast Notification -->
    <div class="fixed top-4 right-4 z-50 hidden" id="toast">
        <div class="toast bg-card border border-border rounded-lg shadow-lg p-4 flex items-center space-x-3">
            <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center">
                <i class="fas fa-check text-secondary-foreground text-sm"></i>
            </div>
            <div>
                <p class="text-sm font-medium text-foreground">Solution copied!</p>
                <p class="text-xs text-muted-foreground">LaTeX formatting preserved</p>
            </div>
        </div>
    </div>

    <script>
        // TODO: Implement business logic, API calls, and state management
        
        (function() {
            // File upload handling
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');

            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
            });

            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('drag-over');
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                // TODO: Handle file processing and upload to Groq API
            });

            // Copy to clipboard functionality
            document.querySelectorAll('.copy-button').forEach(button => {
                button.addEventListener('click', () => {
                    // TODO: Implement copy with LaTeX preservation
                    showToast();
                });
            });

            // Auto-resize textarea
            const textarea = document.querySelector('textarea');
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = this.scrollHeight + 'px';
            });

            // Toast notification
            function showToast() {
                const toast = document.getElementById('toast');
                toast.classList.remove('hidden');
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 3000);
            }

            // Render mathematical expressions
            document.addEventListener('DOMContentLoaded', function() {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false}
                    ]
                });
            });
        })();
    </script>
</body>
</html>